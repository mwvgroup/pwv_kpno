

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Accessing PWV Data &mdash; pwv_kpno 0.10.1 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="pwv_kpno 0.10.1 documentation" href="index.html"/>
        <link rel="next" title="3. Modeling the Atmosphere" href="atmospheric_modeling.html"/>
        <link rel="prev" title="1. Installation and Setup" href="install.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> pwv_kpno
          

          
          </a>

          
            
            
              <div class="version">
                0.10.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">1. Installation and Setup</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Accessing PWV Data</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#checking-available-data">2.1. Checking Available Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-data">2.2. Updating Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#measured-pwv-data">2.3. Measured PWV Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="#modeled-pwv-data">2.4. Modeled PWV Data</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="atmospheric_modeling.html">3. Modeling the Atmosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="blackbody_modeling.html">4. Modeling a Black Body</a></li>
<li class="toctree-l1"><a class="reference internal" href="correcting_observations.html">5. Correcting Observations</a></li>
<li class="toctree-l1"><a class="reference internal" href="for_developers.html">6. For Developers</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">pwv_kpno</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>2. Accessing PWV Data</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/updating_data.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="accessing-pwv-data">
<h1>2. Accessing PWV Data<a class="headerlink" href="#accessing-pwv-data" title="Permalink to this headline">¶</a></h1>
<p><strong>pwv_kpno</strong> relies on PWV measurements taken by the <a class="reference external" href="http://www.suominet.ucar.edu">SuomiNet project</a>. In order to model the PWV transmission
function for a given date, SuomiNet data for that date must be available on
your local machine. By default, each release of <strong>pwv_kpno</strong> contains all
necessary SuomiNet data from 2010 through the end of the previous year.</p>
<p>For convenience, functions are provided to check what data is available on the
local machine, and to download any newly published data. Users can also access
the local data as an <cite>astropy</cite> table.</p>
<div class="section" id="checking-available-data">
<h2>2.1. Checking Available Data<a class="headerlink" href="#checking-available-data" title="Permalink to this headline">¶</a></h2>
<p>Checking the years for which SuomiNet data is locally available can be achieved
using the <cite>available_data</cite> function. By default, version 0.10.0 of <strong>pwv_kpno</strong>
is distributed with all the necessary SuomiNet data from 2010 through 2017.</p>
<dl class="function">
<dt id="pwv_kpno.pwv_trans.available_data">
<code class="descclassname">pwv_kpno.pwv_trans.</code><code class="descname">available_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pwv_kpno/_pwv_data.html#available_data"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pwv_kpno.pwv_trans.available_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of years for which SuomiNet data has been downloaded</p>
<p>Return a list of years for which SuomiNet data has been downloaded to the
local machine. Note that this list includes years for which any amount
of data has been downloaded. It does not indicate if additional data has
been released by SuomiNet for a given year that is not locally available.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A list of years with locally available SuomiNet data</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="example">
<h3>2.1.1. Example:<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pwv_kpno</span><span class="o">.</span><span class="n">available_data</span><span class="p">()</span>

<span class="go">  [2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="updating-data">
<h2>2.2. Updating Data<a class="headerlink" href="#updating-data" title="Permalink to this headline">¶</a></h2>
<p>To download SuomiNet data to your local machine, use the <cite>update_models</cite>
function. By default only data that is not available on the local machine will
be downloaded.</p>
<dl class="function">
<dt id="pwv_kpno.pwv_trans.update_models">
<code class="descclassname">pwv_kpno.pwv_trans.</code><code class="descname">update_models</code><span class="sig-paren">(</span><em>year=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pwv_kpno/_pwv_data.html#update_models"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pwv_kpno.pwv_trans.update_models" title="Permalink to this definition">¶</a></dt>
<dd><p>Download data from SuomiNet and update the locally stored PWV model</p>
<p>Update the locally available SuomiNet data by downloading new data from
the SuomiNet website. Use this data to create an updated model for the PWV
level at Kitt Peak. If a year is provided, only update data for that year.
If not, download all available data from 2017 onward. Data for years from
2010 through 2016 is included with this package version by default.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>year</strong> (<em>int</em>) – A Year from 2010 onward</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A list of years for which models where updated</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="id1">
<h3>2.2.1. Example:<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>By default, <cite>update_models</cite> will download any data that is not available on the
local machine. Version 0.11.0 already includes all data from years 2010 through
2017:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">updated_years</span> <span class="o">=</span> <span class="n">pwv_kpno</span><span class="o">.</span><span class="n">update_models</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">updated_years</span>

<span class="go">  [2017, 2018]</span>
</pre></div>
</div>
<p>If desired, <strong>pwv_kpno</strong> can be forced to (re)download SuomiNet data for a
specific year:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pwv_kpno</span><span class="o">.</span><span class="n">update_models</span><span class="p">(</span><span class="mi">2010</span><span class="p">)</span>

<span class="go">  [2010]</span>
</pre></div>
</div>
<div class="line-block">
<div class="line"><br /></div>
</div>
</div>
</div>
<div class="section" id="measured-pwv-data">
<h2>2.3. Measured PWV Data<a class="headerlink" href="#measured-pwv-data" title="Permalink to this headline">¶</a></h2>
<p>To retrieve an astropy table of SuomiNet data available on the local machine,
use the <cite>measured_pwv</cite> function. Results can be filtered independently by year,
month, day, and hour</p>
<dl class="function">
<dt id="pwv_kpno.pwv_trans.measured_pwv">
<code class="descclassname">pwv_kpno.pwv_trans.</code><code class="descname">measured_pwv</code><span class="sig-paren">(</span><em>year=None</em>, <em>month=None</em>, <em>day=None</em>, <em>hour=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pwv_kpno/_pwv_data.html#measured_pwv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pwv_kpno.pwv_trans.measured_pwv" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an astropy table of PWV measurements taken by SuomiNet</p>
<p>Return an astropy table of precipitable water vapor (PWV) measurements
taken by the SuomiNet project. The first column is named ‘date’ and
contains the UTC datetime of each measurement. Successive columns are
named using the SuomiNet IDs for different locations and contain PWV
measurements for that location in millimeters. By default the returned
table contains all locally available SuomiNet data. Results can be
refined by year, month, day, and hour by using the keyword arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>year</strong> (<em>int</em>) – The year of the desired PWV data</li>
<li><strong>month</strong> (<em>int</em>) – The month of the desired PWV data</li>
<li><strong>day</strong> (<em>int</em>) – The day of the desired PWV data</li>
<li><strong>hour</strong> (<em>int</em>) – The hour of the desired PWV data in 24-hour format</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An astropy table of measured PWV values in mm</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="id2">
<h3>2.3.1. Example:<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>To retrieve all SuomiNet data available on the local machine as an <cite>astropy</cite>
table:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pwv_kpno</span><span class="o">.</span><span class="n">measured_pwv</span><span class="p">()</span>

<span class="go">             date             KITT    P014    SA46    SA48    AZAM</span>
<span class="go">             UTC               mm      mm      mm      mm      mm</span>
<span class="go">  ------------------------- ------- ------- ------- ------- -------</span>
<span class="go">  2010-01-01 00:15:00+00:00      --     3.6     4.2     4.7      --</span>
<span class="go">  2010-01-01 00:45:00+00:00      --     3.7     4.0     4.7      --</span>
<span class="go">  2010-01-01 01:14:00+00:00      --     3.7     3.4     3.6      --</span>
<span class="go">                        ...     ...     ...     ...     ...     ...</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h3>2.3.2. Example:<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>To retrieve SuomiNet data taken on November 14, 2016, specify the datetime as
keyword arguments. Note in the below example that there is no data available
from the SA48 receiver for this date:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pwv_kpno</span><span class="o">.</span><span class="n">measured_pwv</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

<span class="go">             date             KITT    P014    SA46    SA48    AZAM</span>
<span class="go">             UTC               mm      mm      mm      mm      mm</span>
<span class="go">  ------------------------- ------- ------- ------- ------- -------</span>
<span class="go">  2016-11-14 00:15:00+00:00     4.7     6.9     9.8      --     8.4</span>
<span class="go">  2016-11-14 00:45:00+00:00     4.3     6.7     9.9      --     8.0</span>
<span class="go">  2016-11-14 01:14:00+00:00     3.9     6.7     9.7      --     8.0</span>
<span class="go">                        ...     ...     ...     ...     ...     ...</span>
</pre></div>
</div>
<p>If no SuomiNet data is available at all during the specified datetime, then the
returned table will be empty.</p>
</div>
</div>
<div class="section" id="modeled-pwv-data">
<h2>2.4. Modeled PWV Data<a class="headerlink" href="#modeled-pwv-data" title="Permalink to this headline">¶</a></h2>
<p>Using SuomiNet data, <strong>pwv_kpno</strong> creates a model for the PWV level at Kitt
Peak. This model is used exclusively when modeling the atmospheric absorption,
and is updated to reflect new measurements every tie the <cite>update_models</cite>
function is run. To retrieve this model as an astropy table, use the
<cite>modeled_pwv</cite> function</p>
<dl class="function">
<dt id="pwv_kpno.pwv_trans.modeled_pwv">
<code class="descclassname">pwv_kpno.pwv_trans.</code><code class="descname">modeled_pwv</code><span class="sig-paren">(</span><em>year=None</em>, <em>month=None</em>, <em>day=None</em>, <em>hour=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pwv_kpno/_pwv_data.html#modeled_pwv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#pwv_kpno.pwv_trans.modeled_pwv" title="Permalink to this definition">¶</a></dt>
<dd><p>Return an astropy table of the modeled PWV at Kitt Peak</p>
<p>Return a model for the precipitable water vapor level at Kitt Peak as an
astropy table. The first column of the table is named ‘date’ and contains
the UTC datetime of each modeled value. The second column is named ‘pwv’,
and contains PWV values in millimeters. By default this function returns
modeled values from 2010 onward. Results can be restricted to a specific
year, month, day, and hour by using the key word arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>year</strong> (<em>int</em>) – The year of the desired PWV data</li>
<li><strong>month</strong> (<em>int</em>) – The month of the desired PWV data</li>
<li><strong>day</strong> (<em>int</em>) – The day of the desired PWV data</li>
<li><strong>hour</strong> (<em>int</em>) – The hour of the desired PWV data in 24-hour format</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">An astropy table of modeled PWV values in mm</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<div class="section" id="id4">
<h3>2.4.1. Example:<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>To retrieve the entire PWV model covering from 2010 onward:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pwv_kpno</span><span class="o">.</span><span class="n">modeled_pwv</span><span class="p">()</span>

<span class="go">             date                pwv</span>
<span class="go">             UTC                  mm</span>
<span class="go">            object             float64</span>
<span class="go">  ------------------------- --------------</span>
<span class="go">  2010-01-01 00:15:00+00:00 0.898602350838</span>
<span class="go">  2010-01-01 00:45:00+00:00 0.886046065367</span>
<span class="go">  2010-01-01 01:14:00+00:00  0.62058536959</span>
<span class="go">                        ...            ...</span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h3>2.4.2. Example:<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>To retrieve the modeled PWV level for November 14, 2016:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">pwv_kpno</span><span class="o">.</span><span class="n">modeled_pwv</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">11</span><span class="p">,</span> <span class="n">day</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>

<span class="go">               date                pwv</span>
<span class="go">               UTC                  mm</span>
<span class="go">              object             float64</span>
<span class="go">    ------------------------- -------------</span>
<span class="go">    2016-11-14 00:15:00+00:00 2.94364012734</span>
<span class="go">    2016-11-14 00:45:00+00:00 2.85828459218</span>
<span class="go">    2016-11-14 01:14:00+00:00           3.9</span>
<span class="go">                          ...           ...</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="atmospheric_modeling.html" class="btn btn-neutral float-right" title="3. Modeling the Atmosphere" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="install.html" class="btn btn-neutral" title="1. Installation and Setup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Daniel J. Perrefort.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.10.1',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>