**************
For Developers
**************

**pwv_kpno** is open source software released under the GNU `General Public
License <https://www.gnu.org/licenses/gpl-3.0.en.html>`_. The following is
provided as reference for future development.

Extra Dependencies
==================

Documentation for **pwv_kpno** is generated using sphinx with the "Read The
Docs" theme. Source code can be found in the *gh-pages* branch of the project
repository `here <https://github.com/mwvgroup/pwv_kpno/tree/gh-pages>`_.
To update or modify package documentation, you will need to install the
following

.. code-block:: console

    pip install sphinx
    pip install sphinx_rtd_theme

In order to automatically generate a new version of the documentation, from the
`rst_source` directory use the command

.. code-block:: console

    make gh-pages

On Unix systems this will call the make file `rst_source/Makefile`. Currently
there is no make file for Windows.

Note that the usage examples are hard coded, and the make file will not update
the demonstrated code outputs to reflect any new source code changes. Also, the
sphinx configuration file `rst_source/conf.py` is not explicitly setup for any
outputs supported by sphinx other than html (such as Texinfo, LaTeX, or
HTMLHelp).

Future Features
===============

* Include an option or function to return atmospheric transmission functions
  binned at different wavelengths
* When calibrating photometric images, there is error introduced in z when PWV
  absorption isn't accounted for. Provide a function that returns this error.
* Allow users to specify what GPS receivers to download data from and what
  datetimes to ignore.
* Add ability to export / import GPS ids and dates

Some Key Points
===============

* **pwv_kpno** depends on atmospheric models generated by create_atm_model.py.
  These models only consider the effects of precipitable water vapor, but can
  be modified to include the effects of o\ :sub:`2`\  and o\ :sub:`3`\. The
  necessary code for this is commented out within the file.
* New package versions should be released at least every year, and should
  include all relevant SuomiNet data from 2010 through the previous year. No
  SuomiNet data should be included for the year that the new version is
  released.
* The code assumes that the config.txt and measured_pwv.csv files already
  exist. There are no checks in place to determine if the files exist of if
  they need to be created. Make sure these files are present and that they only
  include data for the years you want to include with the current package
  version.

Releasing a New Version
=======================

1. Make sure that the config.txt and measured_pwv.csv exist and exclusively
   include the SuomiNet data intended for distribution with the package
2. Update the package version / release number
3. Generated new documentation as outlined in the above sections. Check that
   the new documentation has the correct version number.
4. Update README.md and __init__.py to indicate what years of SuomiNet data
   are included with the current package version.

